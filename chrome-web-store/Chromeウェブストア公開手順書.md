# Chromeウェブストア 公開手順書

「Google Chat - エクスプローラーで開く」拡張機能を Chrome ウェブストアで公開し、他の人と共有するための手順です。

---

## フォルダ構成（公開用）

```
chrome-web-store/
├── manifest.json      … 拡張機能の設定
├── background.js      … 右クリックメニュー・ネイティブホスト連携
├── icons/
│   ├── icon48.png     … 48x48 アイコン
│   └── icon128.png    … 128x128 アイコン（ストア必須）
└── Chromeウェブストア公開手順書.md（このファイル）
```

**注意**: ネイティブホスト（Python など）は ZIP に含めません。利用者には別途「ネイティブホストのセットアップ方法」を案内します。

---

## 前提条件

1. **Google 開発者アカウント**
   - 初回のみ [Chrome Web Store 開発者登録](https://developer.chrome.com/docs/webstore/register) が必要です。
   - 登録料（一度だけ）がかかります。

2. **ネイティブホストの配布先**
   - 利用者が「エクスプローラーで開く」を使うには、PC にネイティブホストをインストールする必要があります。
   - 次のいずれかを用意してください。
     - **GitHub などでリポジトリを公開**し、`native_host` フォルダ（`open_in_explorer.py`・`run_host.bat`・`install_native_host.ps1`）と利用手順を置く。
     - または **自社サイト・ドキュメント** に「ネイティブホストのダウンロードとインストール手順」を掲載する。
   - ストアの「詳細説明」や「サポートURL」に、そのページのURLを書いておくと利用者が迷いません。

---

## 手順1: 公開用 ZIP を作成する

1. **ZIP に含めるもの**
   - `chrome-web-store` フォルダ**の中身**だけをZIPにします（フォルダごとZIPにしない）。
   - 含めるファイル:
     - `manifest.json`
     - `background.js`
     - `icons/icon48.png`
     - `icons/icon128.png`

2. **ZIP の作り方（Windows）**
   - `D:\WebApp\Chrome_add-on\chrome-web-store` を開く。
   - 中身をすべて選択（`manifest.json`、`background.js`、`icons` フォルダ）。
   - 右クリック → **「送る」** → **「圧縮 (zip) フォルダー」**。
   - 名前を `google-chat-open-in-explorer.zip` など分かりやすい名前にする。

3. **確認**
   - ZIP を解凍したとき、**直下に** `manifest.json` があること。
   - `manifest.json` が ZIP のルートにあることがストアの要件です。

---

## 手順2: Chrome 開発者ダッシュボードでアップロード

1. [Chrome ウェブストア デベロッパーダッシュボード](https://chrome.google.com/webstore/devconsole) を開く。
2. Google アカウントでサインインする。
3. **「新しいアイテム」**（Add new item）をクリック。
4. **「ファイルを選択」** で、手順1で作った ZIP を選び **「アップロード」** をクリック。
5. アップロードが成功すると、アイテムの編集画面が開きます。

---

## 手順3: ストア掲載情報を入力する

左メニューの各タブで、次のように入力します。

### パッケージ（Package）

- アップロードした内容が表示されます。問題なければそのままでOKです。

### ストアの掲載情報（Store listing）

| 項目 | 入力例 |
|------|--------|
| **説明** | 拡張機能の機能説明（例：「Google Chat などで選択したファイル・フォルダのパスを右クリックからエクスプローラーで開きます。Windows 用です。利用にはネイティブホストのセットアップが必要です。セットアップ手順はサポートURLをご覧ください。」） |
| **スニペット** | 短いキャッチコピー（132文字以内）。例：「選択したパスをエクスプローラーで開く（Windows）」 |
| **カテゴリ** | 「仕事」や「生産性」など適切なものを選択 |
| **スクリーンショット** | 右クリックメニューで「エクスプローラーで開く」が出ている画面など（複数枚可） |
| **アイコン** | 128x128 はZIPに含めているので自動で使われます。必要ならストア用の大きな画像を追加 |
| **サポートURL** | ネイティブホストのセットアップ手順や、プロジェクトのREADMEのURL |

**重要**: 「この拡張機能は Windows 用で、利用にはネイティブホストのインストールが必要」であることを説明に必ず書いておくと、利用者と審査の両方に伝わります。

### プライバシー（Privacy）

- **単一の目的**: 例「選択したテキスト（パス）をユーザーのPC上のネイティブアプリに送り、エクスプローラーで開くため」
- **権限の理由**: `nativeMessaging` は「ユーザーがインストールしたネイティブホストと通信し、選択したパスをエクスプローラーで開くために使用」などと記載。
- データの収集・送信をしていない場合は、その旨を選択・記入します。

### 配布（Distribution）

- **公開範囲**: 「公開」にするとストアで検索可能になります。
- **地域**: 配布したい国・地域を選択。
- **価格**: 無料の場合は「無料」を選択。

### テスト手順（Test instructions）

- 審査担当者が「エクスプローラーで開く」を再現するには、Windows PC とネイティブホストのセットアップが必要です。
- 「Windows でネイティブホストをインストールした環境でのみ動作します。テスト手順はサポートURL（または添付の説明）を参照してください」などと書いておくとよいです。

---

## 手順4: 審査に提出する

1. 上記のタブで必要な項目をすべて入力する。
2. 左メニュー下部の **「審査に提出」**（Submit for review）をクリック。
3. 確認ダイアログで内容を確認し、**提出**する。
4. 審査完了まで数日かかることがあります。完了するとメールまたはダッシュボードで通知されます。
5. 審査が通ると、ストアに公開されます（「審査完了後に自動で公開」にしている場合）。

---

## 利用者向けの案内（ストアの説明・サポートURLで書くこと）

ストアの「詳細説明」や「サポートURL」のページに、次のような案内があると便利です。

1. **Chrome ウェブストアから拡張機能をインストール**する。
2. **拡張機能の ID を確認**する（`chrome://extensions` で「ID」をコピー）。
3. **ネイティブホストをインストール**する。  
   - 例：「GitHub の ○○ から `native_host` をダウンロードし、手順書の通り PowerShell で `install_native_host.ps1` を実行してください。拡張機能IDを引数で指定します。」
4. **Google Chat などでパスを選択** → **右クリック** → **「エクスプローラーで開く」** で動作確認。

ネイティブホストのソース（`native_host` フォルダ）と、既存の **`手順書.md`**（ローカル用インストール手順）を、GitHub やウェブサイトにそのまま掲載してリンクしてもかまいません。

---

## バージョン更新のとき

- `manifest.json` の **`version`** を上げる（例: `1.0.0` → `1.0.1`）。
- 同じアイテムの編集画面で **「パッケージ」** から新しい ZIP をアップロードする。
- 再度 **「審査に提出」** する。

---

## 参考リンク

- [Chrome Web Store に公開する（公式）](https://developer.chrome.com/docs/webstore/publish)
- [Chrome ウェブストア デベロッパーダッシュボード](https://chrome.google.com/webstore/devconsole)
- [拡張機能の準備（アイコン・manifest など）](https://developer.chrome.com/docs/webstore/prepare)
